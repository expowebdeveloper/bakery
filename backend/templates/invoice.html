<!DOCTYPE html>
<html>
<head>
    <title>Invoice</title>
    {% load static %}
</head>
<body style="display: flex; justify-content: center; align-items: center; background-color: #f8fafb; padding: 20px;flex-direction: column; gap: 20px;">
    <table style="width: 100%; max-width: 800px; margin: 0 auto; border-collapse: collapse; font-family: Arial, sans-serif; font-size: 14px; color: #333; background-color: #fff; border: 1px solid #ddd;">
        <!-- Header Section -->
        <tr>
            <td colspan="2" style="padding: 20px; background-color: #f3fdf8;">
                <h1 style="margin: 0; font-size: 24px; font-weight: bold;">{% if invoice_config %}{{invoice_config.company_name}} {% endif %}</h1>
                <p style="margin: 5px 0; color: #666;">Business address</p>
                <p style="margin: 5px 0; color: #666;">{% if invoice_config %}  {{invoice_config.company_address}} {% endif %}</p>
            </td>
            <td colspan="2" style="padding: 20px; text-align: right; background-color: #f3fdf8;">
                {% if invoice_config.logo %}
                    <img src="{{ logo_url }}" alt="Company Logo"
                        style="max-width: 150px; height: auto;">
                {% endif %}
            </td>
        </tr>

        <!-- Invoice Details -->
        <tr>
            <td colspan="2" style="padding: 20px; border: 1px solid #ddd;">
                <p style="margin: 5px 0;"><strong>Billed to,</strong></p>
                <p style="margin: 5px 0; color: #333;">{{ invoice.user.bakery.customer_id }}</p>
                <p style="margin: 5px 0; color: #666;"> {{ invoice.order.address }}</p>
                <p style="margin: 5px 0; color: #666;">Company Name: {{ invoice.user.bakery.name }}</p>
                <p style="margin: 5px 0; color: #666;">Organization No: {{ invoice.user.bakery.organization_no }}</p>

            </td>
            <td colspan="2" style="padding: 20px; border: 1px solid #ddd; vertical-align: top;">
                <p style="margin: 5px 0;"><strong>Invoice number:</strong>{{ invoice.invoice_number}}</p>
                <p style="margin: 5px 0;"><strong>Invoice date:</strong> {{ invoice.updated_at}}</p>
                <p style="margin: 5px 0;"><strong>Due date:</strong>{{ invoice.due_date}}</p>
            </td>
        </tr>

        <!-- Subject -->
        <tr>
            <td colspan="4" style="padding: 10px 20px; border: 1px solid #ddd; background-color: #f8fafb;">
                <strong>Importtant Notice:</strong>Please include the invoice number in the bank payment details when making the payment.
            </td>
        </tr>

        <!-- Item Details -->
        <tr style="background-color: #f3fdf8;">
            <th style="padding: 10px; border: 1px solid #ddd; text-align: left;">Item Detail</th>
            <th style="padding: 10px; border: 1px solid #ddd; text-align: right;">Qty</th>
            <th style="padding: 10px; border: 1px solid #ddd; text-align: right;">Rate</th>
            <th style="padding: 10px; border: 1px solid #ddd; text-align: right;">Amount</th>
        </tr>

        {% for item in orders %}

            <tr>
                <td style="padding: 10px; border: 1px solid #ddd;">{{item.product.variant_name}} <br><small style="color: #666;">{{item.product.description|safe}}</small></td>
                <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">{{item.quantity}} </td>
                <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">{{item.price}} </td>
                <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">{{item.price}}</td>
            </tr>
        {% endfor %}

        <!-- Summary -->
        <tr>
            <td colspan="3" style="padding: 10px; border: 1px solid #ddd; text-align: right;">Subtotal</td>
            <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">SEK {{invoice.order.total_amount}}</td>
        </tr>
        <tr>
            <td colspan="3" style="padding: 10px; border: 1px solid #ddd; text-align: right;">VAT (12%)</td>
            <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">SEK {{invoice.order.vat_amount}}</td>
        </tr>
        <tr>
            <td colspan="3" style="padding: 10px; border: 1px solid #ddd; text-align: right;">Discounted Amount</td>
            <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">SEK {% if invoice.order.coupon_name %}{{invoice.order.discount_amount}}{% else%} 0.00{% endif %}</td>
        </tr>
        <tr>
            <td colspan="3" style="padding: 10px; border: 1px solid #ddd; text-align: right;">Delivery Fee</td>
            <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">SEK {{invoice.order.shipping_fee}}</td>
        </tr>
        <!-- <tr>
            <td colspan="3" style="padding: 10px; border: 1px solid #ddd; text-align: right;">Packing Fee</td>
            <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">SEK {{invoice.order.packing_fee}}</td>
        </tr>
        <tr>
            <td colspan="3" style="padding: 10px; border: 1px solid #ddd; text-align: right;">Platform Fee</td>
            <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">SEK {{invoice.order.platform_fee}}</td>
        </tr> -->
        <tr style="background-color: #f3fdf8;">
            <td colspan="3" style="padding: 10px; border: 1px solid #ddd; text-align: right; font-weight: bold;">Total</td>
            <td style="padding: 10px; border: 1px solid #ddd; text-align: right; font-weight: bold;">SEK {{invoice.order.final_amount}}</td>
        </tr>

        <!-- Footer -->
        <tr>
            <td colspan="4" style="padding: 20px; text-align: center; border: 1px solid #ddd; color: #333;">
                Thank you for your order! We appreciate your business and look forword to serving you again.
            </td>
        </tr>
        <tr>
            <td colspan="2" style="padding: 10px; text-align: center; font-size: 12px; color: #999;">
                <p>Email: {% if invoice_config %} {{invoice_config.company_email}} {% endif %}</p>
                <p>Contact No: 0702356950</p>
            </td>
            <td colspan="1" style="padding: 10px; text-align: center; font-size: 12px; color: #999;">
                <p>{% if invoice_config %} {{invoice_config.organization_no}} {% endif %}</p>
                <p>{% if invoice_config %} {{invoice_config.vat_id}} {% endif %}</p>
            </td>
            <td colspan="1" style="padding: 10px; text-align: center; font-size: 12px; color: #999;">

               <p>Bank Details:{% if invoice_config %} {{invoice_config.account_no}} {% endif %} </p>
               <p>Iban: {% if invoice_config %} {{invoice_config.iban_number}} {% endif %}</p>
            </td>
        </tr>
    </table>
</body>
</html>
